(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fb2387e"],{"74ac":function(e,t,a){},b95d:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:e.width,visible:e.isShowVisible,center:"","close-on-click-modal":!1,"before-close":function(){return e.$emit("close")}},on:{"update:visible":function(t){e.isShowVisible=t}}},[a("el-card",[a("el-form",{ref:"schedulingData",attrs:{"label-width":"125px",model:e.schedulingData,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排班名称:",prop:"schedulingName"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:e.schedulingData.schedulingName,callback:function(t){e.$set(e.schedulingData,"schedulingName","string"===typeof t?t.trim():t)},expression:"schedulingData.schedulingName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择类型"},model:{value:e.schedulingData.type,callback:function(t){e.$set(e.schedulingData,"type",t)},expression:"schedulingData.type"}},[a("el-option",{attrs:{label:"白班",value:"白班"}}),e._v(" "),a("el-option",{attrs:{label:"晚班",value:"晚班"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生产机台:",prop:"device"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择生产几台"},model:{value:e.schedulingData.device,callback:function(t){e.$set(e.schedulingData,"device",t)},expression:"schedulingData.device"}},[a("el-option",{attrs:{label:"1#",value:"1#"}}),e._v(" "),a("el-option",{attrs:{label:"23#",value:"23#"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属班组:",prop:"belongingToclass"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择所属班组"},model:{value:e.schedulingData.belongingToclass,callback:function(t){e.$set(e.schedulingData,"belongingToclass",t)},expression:"schedulingData.belongingToclass"}},[a("el-option",{attrs:{label:"A组",value:"A组"}}),e._v(" "),a("el-option",{attrs:{label:"B组",value:"B组"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生效日期:",prop:"effectiveDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.schedulingData.effectiveDate,callback:function(t){e.$set(e.schedulingData,"effectiveDate",t)},expression:"schedulingData.effectiveDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"轮换(天/次):",prop:"intervalDays"}},[a("el-input",{attrs:{type:"number"},model:{value:e.schedulingData.intervalDays,callback:function(t){e.$set(e.schedulingData,"intervalDays","string"===typeof t?t.trim():t)},expression:"schedulingData.intervalDays"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"title_line"},[a("span",{staticClass:"title"},[e._v("人员选择")]),e._v(" "),a("i",{staticClass:"line"})]),e._v(" "),a("div",{staticClass:"add_person"},[a("el-button",{staticClass:"addPersonBtn",attrs:{type:"primary"},on:{click:function(t){return e.addPerson()}}},[e._v("添加")]),e._v(" "),a("el-table",{attrs:{"max-height":"600",border:"",data:e.personDataList}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",fixed:"",width:"50"}}),e._v(" "),e._l(e.tableHeaderList,(function(t,l){return[a("el-table-column",{key:l,attrs:{label:t.label,prop:t.prop,align:"center","show-overflow-tooltip":"","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(l){return["operation"===t.prop?[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.removeItem(l.row)}}},[e._v(" 移除 ")])]:"person"===t.prop?[a("el-select",{attrs:{filterable:"",placeholder:"请选择 "},model:{value:l.row.person,callback:function(t){e.$set(l.row,"person",t)},expression:"scope.row.person"}},[a("el-option",{attrs:{label:"小王",value:"小王"}}),e._v(" "),a("el-option",{attrs:{label:"小张",value:"小张"}}),e._v(" "),a("el-option",{attrs:{label:"godlike",value:"godlike"}}),e._v(" "),a("el-option",{attrs:{label:"小李",value:"小李"}})],1)]:"personCharge"===t.prop?[a("el-checkbox",{staticClass:"checkboxSize",model:{value:l.row.personCharge,callback:function(t){e.$set(l.row,"personCharge",t)},expression:"scope.row.personCharge"}})]:[a("span",[e._v(e._s(l.row[t.prop]))])]]}}],null,!0)})]}))],2)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"title_line"},[a("span",{staticClass:"title"},[e._v("工作时段")]),e._v(" "),a("i",{staticClass:"line"})]),e._v(" "),a("div",{staticClass:"add_person"},[a("el-table",{attrs:{"max-height":"600",border:"",data:e.timeIntervalList}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",fixed:"",width:"50"}}),e._v(" "),e._l(e.tableHeaderTimeInterval,(function(t,l){return[a("el-table-column",{key:l,attrs:{label:t.label,prop:t.prop,align:"center","show-overflow-tooltip":"","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(l){return["startTime"===t.prop?[a("el-time-select",{attrs:{placeholder:"选择时间"},model:{value:l.row.startTime,callback:function(t){e.$set(l.row,"startTime",t)},expression:"scope.row.startTime"}})]:"endTime"===t.prop?[a("el-time-select",{attrs:{placeholder:"选择时间"},model:{value:l.row.endTime,callback:function(t){e.$set(l.row,"endTime",t)},expression:"scope.row.endTime"}})]:[a("span",[e._v(e._s(l.row[t.prop]))])]]}}],null,!0)})]}))],2)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"title_line"},[a("span",{staticClass:"title"},[e._v("过滤日期")]),e._v(" "),a("i",{staticClass:"line"})]),e._v(" "),a("div",{staticClass:"add_person"},[a("el-button",{staticClass:"addPersonBtn",attrs:{type:"primary"},on:{click:function(t){return e.addFilterDate()}}},[e._v("添加")]),e._v(" "),a("el-table",{attrs:{"max-height":"600",border:"",data:e.filterDateList}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",fixed:"",width:"50"}}),e._v(" "),e._l(e.tableHeaderFilterDate,(function(t,l){return[a("el-table-column",{key:l,attrs:{label:t.label,prop:t.prop,align:"center","show-overflow-tooltip":"","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(l){return["operation"===t.prop?[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.removeFilterDate(l.row)}}},[e._v(" 移除 ")])]:"startDate"===t.prop?[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:l.row.startDate,callback:function(t){e.$set(l.row,"startDate",t)},expression:"scope.row.startDate"}})]:"endDate"===t.prop?[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:l.row.endDate,callback:function(t){e.$set(l.row,"endDate",t)},expression:"scope.row.endDate"}})]:[a("span",[e._v(e._s(l.row[t.prop]))])]]}}],null,!0)})]}))],2)],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveScheduling}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取消")])],1)],1)},s=[],i={name:"SchedulingAddEdit",props:{width:{type:String,default:"50vw"},addEditData:{type:Object}},data:function(){return{title:"新增班组",isShowVisible:!0,rules:{schedulingName:[{required:!0,message:"请填写排班名称",tirgger:"blur"}],type:[{required:!0,message:"请选择类型",tirgger:"change"}],device:[{required:!0,message:"请选择生产几台",tirgger:"change"}],belongingToclass:[{required:!0,message:"请选择所属班组",tirgger:"change"}],effectiveDate:[{required:!0,type:"date",message:"请选择生效日期",tirgger:"change"}],intervalDays:[{required:!0,message:"请填写轮换",tirgger:"blur"}]},schedulingData:{},tableHeaderList:[{label:"人员",prop:"person"},{label:"负责人",prop:"personCharge"},{label:"操作",prop:"operation"}],personDataList:[],timeIntervalList:[{type:"白班",startTime:"08:00",endTime:"19:59"},{type:"夜班",startTime:"20:00",endTime:"07:59"}],tableHeaderTimeInterval:[{label:"类型",prop:"type"},{label:"起始时间",prop:"startTime"},{label:"结束时间",prop:"endTime"}],tableHeaderFilterDate:[{label:"起始日期",prop:"startDate"},{label:"结束日期",prop:"endDate"},{label:"操作",prop:"operation"}],filterDateList:[]}},created:function(){console.log(this.addEditData),"新增"===this.addEditData.type?this.title="新增班组":(this.title="修改班组",this.schedulingData=this.addEditData.rowData,this.personDataList=this.addEditData.rowData.personDataList,this.filterDateList=this.addEditData.rowData.filterDateList,this.schedulingData.effectiveDate=new Date(this.addEditData.rowData.effectiveDate),this.filterDateList.map((function(e){e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate)})))},methods:{addPerson:function(){this.personDataList.push({person:null,personCharge:!1})},removeItem:function(e){this.personDataList=this.personDataList.filter((function(t){return t!==e}))},addFilterDate:function(){this.filterDateList.push({startDate:null,endDate:null})},removeFilterDate:function(e){this.filterDateList=this.filterDateList.filter((function(t){return t!==e}))},saveScheduling:function(){var e=this;this.$refs["schedulingData"].validate((function(t,a){t&&(e.$message.success("保存成功!"),e.$emit("close"))}))}}},r=i,o=(a("c50b"),a("2877")),n=Object(o["a"])(r,l,s,!1,null,"26a30f36",null);t["default"]=n.exports},c50b:function(e,t,a){"use strict";a("74ac")}}]);